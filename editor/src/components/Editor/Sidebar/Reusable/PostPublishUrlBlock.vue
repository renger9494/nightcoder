<template>
  <div :class="isAlreadyPublished ? 'light' : ''" class="project-publish-modal__url-block">
    <a :href="pageUrl || '#'" :title="pageUrl || '#'" target="_blank" class="project-publish-modal__url-link">
      <span>{{ pageUrl }}</span>
    </a>
    <button @click="copyUrl" class="copy-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">
        <path
          d="M3.66225 7.93388L3.15625 8.43638C2.71762 8.87113 2.00425 8.8715 1.56588 8.43638C1.35513 8.22725 1.23937 7.94951 1.23937 7.65426C1.23937 7.35901 1.35525 7.08113 1.56575 6.87201L3.42825 5.02414C3.81425 4.64139 4.54037 4.07777 5.06962 4.60264C5.3125 4.84389 5.70475 4.84226 5.94588 4.59952C6.18713 4.35677 6.18563 3.96439 5.94275 3.72339C5.04313 2.83065 3.7135 2.99564 2.5555 4.14464L0.692875 5.99264C0.246 6.43626 0 7.02626 0 7.65426C0 8.28226 0.246 8.87213 0.693 9.31575C1.15287 9.772 1.75675 10 2.36087 10C2.96512 10 3.56925 9.772 4.02938 9.3155L4.53575 8.81288C4.7785 8.57188 4.77987 8.17963 4.53862 7.93676C4.29775 7.69413 3.90513 7.69276 3.66225 7.93388ZM9.30675 0.755526C8.3405 -0.203222 6.9895 -0.255221 6.095 0.632276L5.46425 1.2584C5.22137 1.49952 5.21987 1.89165 5.46112 2.13452C5.70237 2.3774 6.09462 2.37877 6.3375 2.13765L6.968 1.5119C7.43138 1.05178 8.03813 1.24252 8.43388 1.63515C8.64488 1.84427 8.76075 2.12215 8.76075 2.4174C8.76075 2.71277 8.64475 2.99064 8.43412 3.19977L6.447 5.17101C5.53837 6.07251 5.11213 5.64939 4.93025 5.46889C4.68738 5.22776 4.29525 5.22926 4.054 5.47201C3.81275 5.71476 3.81425 6.10714 4.05713 6.34813C4.47425 6.76213 4.95038 6.96738 5.4495 6.96738C6.06063 6.96738 6.70612 6.65963 7.31987 6.05026L9.307 4.07902C9.75375 3.63539 10 3.04527 10 2.41727C10 1.78952 9.75375 1.1994 9.30675 0.755526Z"
          fill="#173BEF"
        />
      </svg>
    </button>
    <div class="project-publish-modal__links" v-if="!isAlreadyPublished">
      <a :href="pageUrl || '#'" target="_blank">
        <span>Go to the Website</span>
        <svg width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M6.77616 2.62266V0.331819C6.77616 0.0656927 7.08099 -0.0918326 7.30571 0.0581659L12.2653 4.06834C12.4626 4.20006 12.4626 4.48447 12.2653 4.61565L7.30571 8.62582C7.08099 8.77582 6.77616 8.61829 6.77616 8.35217V6.22961C3.67786 6.22961 1.05105 7.61347 0.0870944 10C0.0354829 9.68119 0 9.357 0 9.0242C0 5.48876 3.03379 2.62266 6.77616 2.62266Z"
            fill="white"
          />
        </svg>
      </a>
      <a @click="openSettings">
        <span>Change site settings</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M9.00368 7.68122C8.95053 7.48789 8.81515 7.16674 8.54971 6.59379L8.64148 6.37013C9.23642 6.13443 9.55911 5.99383 9.73245 5.8907C9.82237 5.83719 9.90178 5.77726 9.9502 5.6948C10.0006 5.60894 10.0002 5.52538 9.99996 5.48762L9.99994 5.48146V4.47573L9.99997 4.4693C10.0002 4.43126 10.0007 4.34644 9.95013 4.26034C9.90062 4.17607 9.81925 4.11664 9.7283 4.06491C9.55381 3.96567 9.23007 3.83429 8.63558 3.61692L8.54272 3.39207C8.79597 2.80526 8.92457 2.47803 8.97432 2.28252C9.00016 2.18093 9.01388 2.0828 8.99044 1.99049C8.96612 1.89473 8.90808 1.83558 8.8814 1.80838L8.87708 1.80393L8.15573 1.08491L8.01917 0.967229H7.85756C7.79984 0.967229 7.72945 0.976557 7.54668 1.04267C7.3741 1.1051 7.08676 1.22372 6.59499 1.44996L6.36526 1.35551C6.12947 0.761988 5.98923 0.440332 5.88699 0.267635C5.8341 0.178297 5.7749 0.0990455 5.69343 0.0504816C5.60771 -0.000614214 5.52427 -0.000166836 5.48696 3.32341e-05L5.48098 5.54429e-05H4.47456L4.46849 3.1094e-05C4.43143 -0.000182973 4.34731 -0.000668825 4.26149 0.0506355C4.17892 0.100002 4.12011 0.180618 4.06854 0.271031C3.96932 0.445024 3.837 0.767795 3.6189 1.36148L3.39074 1.45601C3.06138 1.31501 2.79472 1.20639 2.5929 1.13128C2.48388 1.0907 2.39113 1.05891 2.31625 1.03697C2.24887 1.01722 2.17372 0.998339 2.11086 0.998339L1.92462 1.0043L1.09951 1.82981L1.09616 1.83299C1.06829 1.85944 1.00598 1.91857 0.97896 2.01528C0.952234 2.11095 0.967138 2.21179 0.994475 2.3133C1.04685 2.50779 1.18278 2.83078 1.44949 3.40609L1.35712 3.62958C0.763124 3.86499 0.440789 4.00449 0.267798 4.10684C0.178053 4.15993 0.0981768 4.21977 0.0495688 4.3029C-0.000657058 4.38879 -0.000181338 4.47282 3.45681e-05 4.51096L5.96145e-05 4.51734V5.52427L3.34109e-05 5.53068C-0.000190056 5.56869 -0.00068789 5.65337 0.0497834 5.73941C0.099156 5.82358 0.180321 5.88309 0.271165 5.93497C0.445458 6.0345 0.768845 6.16645 1.36277 6.38482L1.45507 6.60769C1.20187 7.19419 1.0734 7.52131 1.02377 7.7167C0.997999 7.81816 0.984294 7.91637 1.00795 8.00871C1.03254 8.10466 1.09104 8.16364 1.11776 8.19057L1.1221 8.19496L1.12361 8.19648L1.83672 8.90912L1.97818 9.0331H2.14131C2.19914 9.0331 2.26919 9.02363 2.45146 8.95751C2.62369 8.89504 2.91089 8.77632 3.40319 8.54987L3.6325 8.64499C3.86836 9.23854 4.00862 9.56016 4.11097 9.73278C4.16393 9.82211 4.22326 9.90136 4.30498 9.94983C4.39062 10.0006 4.47404 10.0002 4.51131 9.99997L4.51739 9.99994H5.52381L5.53004 9.99997C5.56745 10.0002 5.65201 10.0007 5.73792 9.94938C5.82094 9.89979 5.8796 9.81873 5.93079 9.72847C6.02934 9.55471 6.16095 9.23209 6.37942 8.63887L6.6098 8.54389C6.93867 8.68505 7.20487 8.79378 7.40628 8.86898C7.51508 8.9096 7.60762 8.94144 7.68232 8.96341C7.74947 8.98316 7.82458 9.00211 7.88746 9.00211L8.07381 8.99683L8.90672 8.1647L8.90886 8.1625L8.91334 8.15793C8.94001 8.13082 8.99886 8.07099 9.0231 7.97493C9.04681 7.88095 9.03141 7.78208 9.00368 7.68122ZM4.3412 8.16759C4.48379 8.52981 4.65131 8.93173 4.75579 9.1587H5.27824C5.37659 8.92996 5.53122 8.53177 5.66153 8.17404L5.72587 7.99957L6.61797 7.63195L6.77813 7.7012C7.1365 7.85715 7.54198 8.02398 7.77628 8.11056L8.14187 7.74566C8.04925 7.51417 7.87784 7.12635 7.71776 6.78453L7.63917 6.61552L8.00802 5.71699L8.17381 5.65166C8.53617 5.50932 8.93884 5.34209 9.16667 5.23752V4.7271C8.93764 4.62913 8.53969 4.47597 8.18161 4.3464L8.00837 4.28325L7.63711 3.38385L7.70902 3.21924C7.86328 2.86403 8.02866 2.46312 8.11603 2.22768L7.74969 1.86223C7.52406 1.95363 7.12867 2.12809 6.77964 2.29062L6.61577 2.36735L5.72267 1.99996L5.6572 1.83356C5.51511 1.47167 5.34715 1.06901 5.24256 0.841917H4.72037C4.62211 1.06994 4.46806 1.46795 4.33791 1.82597L4.27454 1.99967L3.38378 2.369L3.22361 2.29906C2.86424 2.14331 2.45817 1.97686 2.22327 1.89041L1.85807 2.25578C1.95007 2.48644 2.12163 2.87366 2.28149 3.21617L2.3609 3.38512L1.99003 4.28366L1.825 4.34871C1.46349 4.49078 1.0615 4.65787 0.83361 4.76231V5.27378C1.06247 5.37206 1.46017 5.52572 1.81818 5.6559L1.81955 5.6564L1.99061 5.71992L2.36187 6.6162L2.28983 6.78072C2.13567 7.13544 1.97042 7.5358 1.88293 7.77102L2.25016 8.13772C2.47581 8.04586 2.87087 7.87133 3.21995 7.7088L3.38453 7.63185L4.27588 8.00157L4.3412 8.16759Z"
            fill="white"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M3.11283 4.99988C3.11283 6.04129 3.95945 6.88842 4.99995 6.88842C6.04029 6.88842 6.88474 6.04094 6.88474 4.99988C6.88474 3.95955 6.04016 3.11253 4.99995 3.11253C3.95943 3.11253 3.11283 3.95906 3.11283 4.99988ZM4.99995 3.95415C4.41772 3.95415 3.94638 4.42472 3.94638 4.99993C3.94638 5.5758 4.41776 6.0467 4.99995 6.0467C5.5806 6.0467 6.05186 5.57605 6.05189 4.99999C6.05171 4.42447 5.58072 3.95415 4.99995 3.95415Z"
            fill="white"
          />
        </svg>
      </a>
    </div>
    <div class="project-publish-modal__links" v-else>
      <a @click="openSettings">
        <svg
          style="margin-right: 8px"
          xmlns="http://www.w3.org/2000/svg"
          width="10"
          height="10"
          viewBox="0 0 10 10"
          fill="none"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M9.00368 7.68122C8.95053 7.48789 8.81515 7.16674 8.54971 6.59379L8.64148 6.37013C9.23642 6.13443 9.55911 5.99383 9.73245 5.8907C9.82237 5.83719 9.90178 5.77726 9.9502 5.6948C10.0006 5.60894 10.0002 5.52538 9.99996 5.48762L9.99994 5.48146V4.47573L9.99997 4.4693C10.0002 4.43126 10.0007 4.34644 9.95013 4.26034C9.90062 4.17607 9.81925 4.11664 9.7283 4.06491C9.55381 3.96567 9.23007 3.83429 8.63558 3.61692L8.54272 3.39207C8.79597 2.80526 8.92457 2.47803 8.97432 2.28252C9.00016 2.18093 9.01388 2.0828 8.99044 1.99049C8.96612 1.89473 8.90808 1.83558 8.8814 1.80838L8.87708 1.80393L8.15573 1.08491L8.01917 0.967229H7.85756C7.79984 0.967229 7.72945 0.976557 7.54668 1.04267C7.3741 1.1051 7.08676 1.22372 6.59499 1.44996L6.36526 1.35551C6.12947 0.761988 5.98923 0.440332 5.88699 0.267635C5.8341 0.178297 5.7749 0.0990455 5.69343 0.0504816C5.60771 -0.000614214 5.52427 -0.000166836 5.48696 3.32341e-05L5.48098 5.54429e-05H4.47456L4.46849 3.1094e-05C4.43143 -0.000182973 4.34731 -0.000668825 4.26149 0.0506355C4.17892 0.100002 4.12011 0.180618 4.06854 0.271031C3.96932 0.445024 3.837 0.767795 3.6189 1.36148L3.39074 1.45601C3.06138 1.31501 2.79472 1.20639 2.5929 1.13128C2.48388 1.0907 2.39113 1.05891 2.31625 1.03697C2.24887 1.01722 2.17372 0.998339 2.11086 0.998339L1.92462 1.0043L1.09951 1.82981L1.09616 1.83299C1.06829 1.85944 1.00598 1.91857 0.97896 2.01528C0.952234 2.11095 0.967138 2.21179 0.994475 2.3133C1.04685 2.50779 1.18278 2.83078 1.44949 3.40609L1.35712 3.62958C0.763124 3.86499 0.440789 4.00449 0.267798 4.10684C0.178053 4.15993 0.0981768 4.21977 0.0495688 4.3029C-0.000657058 4.38879 -0.000181338 4.47282 3.45681e-05 4.51096L5.96145e-05 4.51734V5.52427L3.34109e-05 5.53068C-0.000190056 5.56869 -0.00068789 5.65337 0.0497834 5.73941C0.099156 5.82358 0.180321 5.88309 0.271165 5.93497C0.445458 6.0345 0.768845 6.16645 1.36277 6.38482L1.45507 6.60769C1.20187 7.19419 1.0734 7.52131 1.02377 7.7167C0.997999 7.81816 0.984294 7.91637 1.00795 8.00871C1.03254 8.10466 1.09104 8.16364 1.11776 8.19057L1.1221 8.19496L1.12361 8.19648L1.83672 8.90912L1.97818 9.0331H2.14131C2.19914 9.0331 2.26919 9.02363 2.45146 8.95751C2.62369 8.89504 2.91089 8.77632 3.40319 8.54987L3.6325 8.64499C3.86836 9.23854 4.00862 9.56016 4.11097 9.73278C4.16393 9.82211 4.22326 9.90136 4.30498 9.94983C4.39062 10.0006 4.47404 10.0002 4.51131 9.99997L4.51739 9.99994H5.52381L5.53004 9.99997C5.56745 10.0002 5.65201 10.0007 5.73792 9.94938C5.82094 9.89979 5.8796 9.81873 5.93079 9.72847C6.02934 9.55471 6.16095 9.23209 6.37942 8.63887L6.6098 8.54389C6.93867 8.68505 7.20487 8.79378 7.40628 8.86898C7.51508 8.9096 7.60762 8.94144 7.68232 8.96341C7.74947 8.98316 7.82458 9.00211 7.88746 9.00211L8.07381 8.99683L8.90672 8.1647L8.90886 8.1625L8.91334 8.15793C8.94001 8.13082 8.99886 8.07099 9.0231 7.97493C9.04681 7.88095 9.03141 7.78208 9.00368 7.68122ZM4.3412 8.16759C4.48379 8.52981 4.65131 8.93173 4.75579 9.1587H5.27824C5.37659 8.92996 5.53122 8.53177 5.66153 8.17404L5.72587 7.99957L6.61797 7.63195L6.77813 7.7012C7.1365 7.85715 7.54198 8.02398 7.77628 8.11056L8.14187 7.74566C8.04925 7.51417 7.87784 7.12635 7.71776 6.78453L7.63917 6.61552L8.00802 5.71699L8.17381 5.65166C8.53617 5.50932 8.93884 5.34209 9.16667 5.23752V4.7271C8.93764 4.62913 8.53969 4.47597 8.18161 4.3464L8.00837 4.28325L7.63711 3.38385L7.70902 3.21924C7.86328 2.86403 8.02866 2.46312 8.11603 2.22768L7.74969 1.86223C7.52406 1.95363 7.12867 2.12809 6.77964 2.29062L6.61577 2.36735L5.72267 1.99996L5.6572 1.83356C5.51511 1.47167 5.34715 1.06901 5.24256 0.841917H4.72037C4.62211 1.06994 4.46806 1.46795 4.33791 1.82597L4.27454 1.99967L3.38378 2.369L3.22361 2.29906C2.86424 2.14331 2.45817 1.97686 2.22327 1.89041L1.85807 2.25578C1.95007 2.48644 2.12163 2.87366 2.28149 3.21617L2.3609 3.38512L1.99003 4.28366L1.825 4.34871C1.46349 4.49078 1.0615 4.65787 0.83361 4.76231V5.27378C1.06247 5.37206 1.46017 5.52572 1.81818 5.6559L1.81955 5.6564L1.99061 5.71992L2.36187 6.6162L2.28983 6.78072C2.13567 7.13544 1.97042 7.5358 1.88293 7.77102L2.25016 8.13772C2.47581 8.04586 2.87087 7.87133 3.21995 7.7088L3.38453 7.63185L4.27588 8.00157L4.3412 8.16759Z"
            fill="black"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M3.11283 4.99988C3.11283 6.04129 3.95945 6.88842 4.99995 6.88842C6.04029 6.88842 6.88474 6.04094 6.88474 4.99988C6.88474 3.95955 6.04016 3.11253 4.99995 3.11253C3.95943 3.11253 3.11283 3.95906 3.11283 4.99988ZM4.99995 3.95415C4.41772 3.95415 3.94638 4.42472 3.94638 4.99993C3.94638 5.5758 4.41776 6.0467 4.99995 6.0467C5.5806 6.0467 6.05186 5.57605 6.05189 4.99999C6.05171 4.42447 5.58072 3.95415 4.99995 3.95415Z"
            fill="black"
          />
        </svg>
        <span>Change URL</span>
      </a>
    </div>
  </div>
</template>

<script lang="ts">
import Vue from 'vue';

export default Vue.extend({
  name: 'PostPablishUrlBlock',
  props: {
    pageUrl: {
      type: String,
      required: true
    },
    isAlreadyPublished: Boolean
  },
  methods: {
    copyUrl() {
      navigator.clipboard.writeText(this.pageUrl || '#');
    },
    async openSettings(event: Event) {
      if (event) event.preventDefault();

      const { dispatch } = this.$store;
      const { pageId, projectId } = this.$route.params;

      await dispatch('siteSettings/loadModalData', { id: pageId, projectId });

      dispatch('ui/changeVisibleModalName', {
        newVisibleModalName: 'site-settings'
      });
    }
  }
});
</script>

<style lang="scss" scoped>
.project-publish-modal__url-block {
  background: #000000;
  border-radius: $shape_border_radius;
  padding: 6px 6px 16px;
  position: relative;
  &.light {
    background: #d7e2fc;
    .project-publish-modal__links {
      a {
        color: #000;
        margin: 0;
      }
    }
  }
}
.project-publish-modal__url-link {
  font-style: normal;
  font-weight: normal;
  font-size: 13px;
  line-height: 15px;
  color: #173bef;
  text-decoration: none;
  display: block;
  background: #ffffff;
  border-radius: $shape_border_radius;
  padding: 0 6px;
  height: 34px;
  display: flex;
  align-items: center;
  cursor: pointer;
  margin-bottom: 16px;
  span {
    margin-bottom: 3px;
  }
}
.project-publish-modal__links {
  display: flex;
  align-items: center;
  justify-content: center;
  a {
    display: flex;
    align-items: center;
    font-style: normal;
    font-weight: 500;
    font-size: 10px;
    line-height: 12px;
    letter-spacing: 0.03em;
    color: #ffffff;
    text-decoration: none;
    cursor: pointer;
    &:last-child {
      margin-left: 24px;
    }
    svg {
      margin-left: 8px;
    }
  }
}

.copy-btn {
  position: absolute;
  z-index: 999;
  cursor: pointer;
  top: 14px;
  right: 14px;
}
</style>
